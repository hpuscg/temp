(function(t){function e(e){for(var i,r,o=e[0],n=e[1],d=e[2],u=0,p=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&p.push(s[r][0]),s[r]=0;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);c&&c(e);while(p.length)p.shift()();return l.push.apply(l,d||[]),a()}function a(){for(var t,e=0;e<l.length;e++){for(var a=l[e],i=!0,o=1;o<a.length;o++){var n=a[o];0!==s[n]&&(i=!1)}i&&(l.splice(e--,1),t=r(r.s=a[0]))}return t}var i={},s={app:0},l=[];function r(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=i,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],n=o.push.bind(o);o.push=e,o=o.slice();for(var d=0;d<o.length;d++)e(o[d]);var c=n;l.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"011b":function(t,e,a){"use strict";var i=a("502f"),s=a.n(i);s.a},"068e":function(t,e,a){"use strict";a.r(e),a.d(e,"json",(function(){return i}));const i={tableParams:{description:{label:"证书描述",type:"input"},nums:{label:"签发数量",type:"input"},CreatedAt:{label:"创建时间",type:"input"}}}},"098e":function(t,e){},"10b4":function(t,e,a){"use strict";a.r(e),a.d(e,"json",(function(){return i}));const i={tableParams:{real_name:{label:"客户名称",type:"input",width:140},user_name:{label:"登录账号",type:"input"},email:{label:"邮箱",type:"input"},phone:{label:"电话",type:"input",width:"300"},CreatedAt:{label:"创建时间",type:"input"}}}},1774:function(t,e,a){"use strict";a.r(e),a.d(e,"json",(function(){return i}));const i={tableParams:{description:{label:"证书描述",type:"input"},nums:{label:"签发数量",type:"input"},used_num:{label:"已使用证书数",type:"input",width:"300"},CreatedAt:{label:"创建时间",type:"input"}}}},"18b9":function(t,e){},"19e5":function(t,e,a){"use strict";var i=a("cd76"),s=a.n(i);s.a},"1fc7":function(t,e,a){"use strict";a.r(e),a.d(e,"json",(function(){return i}));const i={tableParams:{name:{label:"产品名称",type:"input"},device_model:{label:"产品型号",type:"input"},description:{label:"产品描述",type:"input"},CreatedAt:{label:"创建时间",type:"input"}}}},"22e8":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgkAAAFdBAMAAAB7u+O3AAAAElBMVEU8c/9HcEw7df86dP8/e/86dP/J9rIFAAAABXRSTlMzAHzJEpCASJwAAAT7SURBVHja7d0xc9owGMZxAfVuQ7yHgT0M7OWu2Y2Jvv9XqWTJIBqILeFYavR/J87tGefHo8cyuWuF7OZUHeRc01Zq1lOdbXs9WXfi3eDhz1MK86fVRs43e/3OxUQnOzsn0ycuhw8/UlBRaMRcU3SX8jKV6Umfzb7WL+vhww8UVBTEfGMupZ6K4Xg92Yfzo39x+L7CrFFQYeg+nGoqhUafzNbaQr3cDB++qzBvFPowbJIpyE5h5ijoMBydy4pfkJ3C3FEQ4tBMerd8tiC1wuxREGJlclkkUpBaQf1FMffs2knvlk8WZCliREGIpdk61WkUpFKIEYV+6zTZ3fK5gizFqZJNBIWp75ZPFWQp5r9B3GyddikUpFKIE4U+DGUKBVmKOk4ULlun9wQKUrVjpCj0W6cUClIpxELot051/IKMqWC3TtN9yxVckFEV7NZpE70goyr0W6foE1dB3P8CLDcFu3XKXCGRMMRWKO5+G5qbQr91ylxh9eDXRXkpiMkeKoN+V2jevYmusIyoILfrRBSi5tCGIW+FpQ1D3gq/bBjyVujDkLmCDUPmCjYMuSuYMOSuYMKQvUIXhuwVujCgoMPwmr2CDkOJggoDCjoMrAgdBtpRTYECCiiggAIKKKCAAgoooIACCiiggAIKKKCAAgoooIACCiiggAIKKKCAAgoooIACCiiggAIKKKCAAgoooIACCij8JIU3FITYoUAWyAIKKKCAAgoooICCjwL/CgUKKKCAAgoP5oACWSALZIEsoIACCkMKAgUUUEABBRRQQAGF4ZEo6Cz8RkEFAQUUUHAV+D8DUEABBRRQQAEFFFBAAQUUUEABBRRQQAEFFFBAAQUUUEABBRRQQAEFFFBAAQUUUEABBRRQQAEFFFBAAQUUUEABBRRQQAEFFDKYMwpCLFEgC2QBBRRQQAEFFFBAAQVfhRYFFFBAAYXPs0KBLJAFskAWUEABBRTGKDQooIACCiiggAIKX0+Bgs7CBwoqCyiggAIK/yqcUEABBRRQQAEFFFBAAQUUUEABBRRQQAEFFFBAAQUUUEABBRRQQAEFFFBAAQUUUEABBRRQQAEFFFBAAQUUUEABBRRQQAEFFH64wh4FIXYokAWyQBbIAgoooIACCiiggEKIwhYFFFBAAYXPc0CBLJAFskAWUEABhSGFBQoooIDCdAqFTGliKSSFIM9xFApZJTRr2cRQWMp9SgrVu4yhcGirtEa2wQoyVGElF4kpbORbcBaOgQryo0ptiuA1IQMVLtVYm4Y+dZk0M3x48tmaNdHMq3CpxtLepsxn0c1+8PA3jF0Tr7MqXKpxd/0s1uZlO3z4G6axVxOoUCmFt+Bq3DjXcDCvF4OHv2W6bL4ErgmtUJ+Dq9FewvG65D+GD3/jmqiD1kShFSrfMCRWje6aOIRspNWVKgXPMCRXjc6aKAPWhP5QS7H1DENy1Xi7JkKioBRavzAkWI03a6L1j0Kt7xHbF58wpFiNzppY+7acikJ3p2yr9/P/XY2OvO/DpY5Cp+AThkSr0ekfz4dLHQWj4BGGVKvRWRNeD5ddFIzC+DAkW43umvB5uOyiYBVGhyHdanSC57GRNlGwCmPDkHI1Om89fiNtotArjAtD0tXorond2SsKvcK4MKRdjc47jt1I2yhcFFQYRrxF2tV4syZG7rrrGwUdhsFJvBrdj+owUkz2Cn+6OVY5T/kXJGxEfjH5pBoAAAAASUVORK5CYII="},"2c4d":function(t,e,a){"use strict";var i=a("39e7"),s=a.n(i);s.a},"30b8":function(t,e,a){},"39e7":function(t,e,a){},"3c80":function(t,e,a){"use strict";var i=a("47d5"),s=a.n(i);s.a},"3fe9":function(t,e,a){"use strict";var i=a("7424"),s=a.n(i);s.a},"41e5":function(t,e,a){"use strict";var i=a("abc4"),s=a.n(i);s.a},"451a":function(t,e,a){},4678:function(t,e,a){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(t){var e=l(t);return a(e)}function l(t){if(!a.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}s.keys=function(){return Object.keys(i)},s.resolve=l,t.exports=s,s.id="4678"},"47d5":function(t,e,a){},"502f":function(t,e,a){},5143:function(t,e,a){},"538e":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);var i=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-view")},l=[],r={name:"App",data(){return{}},methods:{}},o=r,n=(a("5c0b"),a("2877")),d=Object(n["a"])(o,s,l,!1,null,null,null),c=d.exports,u=a("8c4f"),p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login",staticStyle:{height:"100vh",width:"100vw"}},[i("img",{staticClass:"login_bgr",attrs:{src:a("b9fd"),height:"100%",width:"100%"}}),i("img",{staticClass:"login_bdr",attrs:{src:a("22e8"),width:"521",height:"348"}}),i("div",{staticClass:"login_text",attrs:{tabindex:"0"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.doLogin(e)}}},[t._m(0),i("el-col",{ref:"usr",staticClass:"col usr_col rowStart",staticStyle:{width:"360px"},attrs:{span:15,offset:4}},[i("div",{staticStyle:{"background-color":"rgba(4,12,22,0.5)"},style:{backgroundColor:t.usrBgr}},[i("i",{staticClass:"iconfont login_icon"},[t._v("")])]),i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.ruleForm.user_name,expression:"ruleForm.user_name"}],staticClass:"login_input",staticStyle:{width:"318px"},style:{backgroundColor:t.usrBgr},attrs:{autocomplete:"off",placeholder:"请输入用户名"},domProps:{value:t.ruleForm.user_name},on:{input:function(e){e.target.composing||t.$set(t.ruleForm,"user_name",e.target.value)}}})])]),i("el-col",{ref:"pwd_col",staticClass:"col pwd_col rowStart",staticStyle:{width:"360px"},attrs:{span:15,offset:4}},[i("div",{staticStyle:{"background-color":"rgba(4,12,22,0.5)"},style:{backgroundColor:t.pwdBgr}},[i("i",{staticClass:"iconfont login_icon"},[t._v("")])]),i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.ruleForm.password,expression:"ruleForm.password"}],staticClass:"login_input",staticStyle:{width:"318px"},style:{backgroundColor:t.pwdBgr},attrs:{type:"password",autocomplete:"off",placeholder:"请输入密码"},domProps:{value:t.ruleForm.password},on:{input:function(e){e.target.composing||t.$set(t.ruleForm,"password",e.target.value)}}})])]),i("el-col",{staticClass:"checkbox_col",attrs:{span:16,offset:4}},[i("el-checkbox",{attrs:{checked:t.checked},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[i("span",{staticClass:"checkbox_txt_rem"},[t._v("记住密码")])])],1),i("el-col",{staticClass:"btn_col",attrs:{span:16,offset:4}},[i("button",{staticClass:"login_btn",on:{click:t.doLogin}},[t._v("登 录")])])],1)])},m=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flexRow",staticStyle:{"margin-top":"-47px"}},[a("span",{staticClass:"loginTitle"},[t._v("授权证书管理平台")])])}],g=a("bc3a"),f=a.n(g),h=a("5c96"),b=a.n(h);let _=function(){return sessionStorage.getItem("token")}(),v=f.a.create({});function y(t,e){return v({url:t,method:"GET",headers:{},params:e})}function F(t,e){let a={url:t,method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},data:e};return a.data=JSON.stringify(e),v(a)}function x(t,e){return v({url:t,method:"PUT",headers:{"Content-Type":"application/json;charset=UTF-8"},data:JSON.stringify(e)})}function A(t,e){return v({url:t,method:"DELETE",headers:{},params:e})}v.defaults.headers.common["Authorization"]=_,v.interceptors.request.use((function(t){let e=t.url;return e.indexOf("login")>-1&&(sessionStorage.setItem("token",""),t.headers.Authorization=""),e.indexOf("login")<0&&(t.headers.Authorization=sessionStorage.getItem("token")),t}),(function(t){return Promise.reject(t)})),v.interceptors.response.use(t=>(t.headers["refresh-token"]&&sessionStorage.setItem("token","Bearer "+t.headers["refresh-token"]),t),t=>(401===t.response.status?(Be.push({name:"login"}),Object(h["Message"])({showClose:!0,message:"登录超时",type:"error"})):Object(h["Message"])({showClose:!0,message:"请求错误!",type:"error"}),t));const k="/login",C={Post(t){return F(k,t)}};var D={data(){return{usrBgr:"#040C16",pwdBgr:"#040C16",checked:!0,ruleForm:{user_name:"",password:""}}},created(){},mounted(){const t=this.DG_Fun._rememberCookie.getCookie();t&&t.user_name&&t.pwd?(this.checked=!0,this.ruleForm.user_name=t.user_name,this.ruleForm.password=t.pwd):this.checked=!1},methods:{doLogin(){this.ruleForm.user_name?this.usrBgr="#040C16":this.usrBgr="#5d188e",this.ruleForm.password?this.pwdBgr="#040C16":this.pwdBgr="#5d188e",this.ruleForm.user_name&&this.ruleForm.password&&C.Post(this.ruleForm).then(t=>{sessionStorage.setItem("token",t.data.data.token),sessionStorage.setItem("roleID",t.data.data.role_id),sessionStorage.setItem("user_name",this.ruleForm.user_name),sessionStorage.setItem("checked",this.checked),this.checked?this.DG_Fun._rememberCookie.setCookie(this.ruleForm.user_name,this.ruleForm.password,365):this.DG_Fun._rememberCookie.setCookie("","",365),1==t.data.data.role_id?this.$router.push({name:"homePage"}):this.$router.push({name:"authorization"})})}}},w=D,j=(a("bc24"),Object(n["a"])(w,p,m,!1,null,null,null)),S=j.exports,P=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},$=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"error"},[a("span",{staticClass:"font-name"},[t._v("404")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("span",{staticClass:"font-title"},[t._v("抱歉,您访问的页面不存在!")])])}],I={},E=I,O=(a("011b"),Object(n["a"])(E,P,$,!1,null,"4ec9265f",null)),B=O.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("nav-menu",{staticClass:"item-1"}),a("left-menu",{staticClass:"item-2"}),t.isRouterAlive?a("router-view",{staticClass:"item-3"}):t._e()],1)},N=[],q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"topNav flexRowBetween"},[t._m(0),a("span",{staticClass:"icon-user"},[a("i",{staticClass:"iconfont icon-user"},[a("el-dropdown",{staticClass:"icon-username",staticStyle:{cursor:"pointer"}},[a("span",{staticClass:"el-dropdown-link"},[t._v(" 欢迎, "+t._s(t.userName)+" "),a("i",{staticClass:"el-icon-caret-bottom"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(e){return t.doLogout(e)}}},[t._v(" 退出登录 ")])],1)],1)],1)])])},T=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("img",{staticClass:"logoImg",attrs:{src:a("a171"),width:"15",height:"15",alt:""}}),i("span",[t._v("授权证书管理平台")])])}],U={data(){return{userName:""}},created:function(){let t=sessionStorage.getItem("user_name");this.userName=t},methods:{doLogout(){sessionStorage.removeItem("user_name"),this.$router.push({name:"login"})}},computed:{}},G=U,L=(a("693e"),Object(n["a"])(G,q,T,!1,null,"4b812b44",null)),M=L.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"leftBox"},[t._l(t.menuParams,(function(e,i){return[e.children?[a("div",{staticClass:"leftFontContainer",class:{active:t.activeItem.indexOf(e.path)>-1},on:{click:function(a){return t.menuExpend(e)}}},[a("i",{staticClass:"iconfont leftFont leftIcon",domProps:{innerHTML:t._s(e.icon)}}),a("span",{staticClass:"leftFont"},[t._v(t._s(t.$t(e.label)))]),a("span",{class:e.showFlag?"el-icon-arrow-up":"el-icon-arrow-down",staticStyle:{margin:"12px 10px 0 0",float:"right"}})]),e.showFlag?t._l(e.children,(function(e,i){return a("div",{staticClass:"leftFontContainerChild",class:{active:t.activeItem===e.path},on:{click:function(a){return t.menuBtn(e)}}},[a("i",{staticClass:"iconfont leftFont leftIconChild",domProps:{innerHTML:t._s(e.icon)}}),a("span",{staticClass:"leftFont"},[t._v(t._s(t.$t(e.label)))])])})):t._e()]:[a("div",{staticClass:"leftFontContainer",class:{active:t.activeItem===e.path},on:{click:function(a){return t.menuBtn(e)}}},[a("i",{staticClass:"iconfont leftFont leftIcon",domProps:{innerHTML:t._s(e.icon)}}),a("span",{staticClass:"leftFont"},[t._v(t._s(t.$t(e.label)))])])]]}))],2)},R=[],Q={data(){let t=1==sessionStorage.getItem("roleID"),e="homePage",a=[];return t?(a=[{label:"首页概览",path:"homePage"},{label:"产品管理",path:"application"},{label:"模板管理",path:"template"},{label:"证书管理",path:"certificate",showFlag:!1,children:[{label:"单个签发",path:"certificate"},{label:"批量签发",path:"certificateM"}]},{label:"用户管理",path:"user"}],e="homePage"):(e="authorization",a=[{label:"授权统计",path:"authorization"},{label:"证书管理",path:"certificateClient"},{label:"我的消息",path:"myMessage"}]),{activeItem:e,menuParams:a}},watch:{$route:{handler:function(t,e){this.activeItem=t.name},deep:!0}},created(){this.activeItem=this.$route.name||"certificate"},methods:{menuBtn(t){this.activeItem=t.path,this.$router.push({name:t.path})},menuExpend(t){t.showFlag=!t.showFlag}},computed:{}},K=Q,H=(a("9f84"),Object(n["a"])(K,z,R,!1,null,"7d38a624",null)),W=H.exports,X={data(){return{isRouterAlive:!0}},mounted(){},provide(){return{reload:this.reload}},methods:{reload(){this.isRouterAlive=!1,this.$nextTick(()=>this.isRouterAlive=!0)}},components:{NavMenu:M,LeftMenu:W}},Y=X,Z=(a("6295"),Object(n["a"])(Y,V,N,!1,null,"8f6ab258",null)),J=Z.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{height:"30px",margin:"20px 0 0 20px"}},[a("el-col",{attrs:{span:10}},[a("span",{staticClass:"title",staticStyle:{"margin-left":"28px"}},[t._v("时间:")]),a("el-date-picker",{staticStyle:{"margin-left":"20px",width:"185px"},attrs:{type:"datetime","picker-options":t.pickerOptionsStart,"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择开始时间"},model:{value:t.filterParams.start_time,callback:function(e){t.$set(t.filterParams,"start_time",e)},expression:"filterParams.start_time"}}),a("span",{staticStyle:{"margin-left":"10px"}},[t._v("-")]),a("el-date-picker",{staticStyle:{"margin-left":"10px",width:"185px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":t.pickerOptionsEnd,placeholder:"选择结束时间"},model:{value:t.filterParams.end_time,callback:function(e){t.$set(t.filterParams,"end_time",e)},expression:"filterParams.end_time"}})],1),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"title",staticStyle:{"margin-left":"5px"}},[t._v("产品名称:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filterParams.product_id,expression:"filterParams.product_id"}],staticClass:"input inputSys inputFilter",domProps:{value:t.filterParams.product_id},on:{input:function(e){e.target.composing||t.$set(t.filterParams,"product_id",e.target.value)}}})])],1),a("div",{staticStyle:{width:"calc(100vw - 170px)",height:"30px",margin:"10px 0 0 20px"}},[a("el-col",{attrs:{span:10}},[a("span",{staticClass:"title"},[t._v("证书类型:")]),a("el-select",{staticClass:"selectFilter",model:{value:t.filterParams.license_type,callback:function(e){t.$set(t.filterParams,"license_type",e)},expression:"filterParams.license_type"}},[a("el-option",{attrs:{value:"0",label:"授权"}}),a("el-option",{attrs:{value:"1",label:"重置密码"}})],1)],1),a("el-col",{attrs:{span:7}},[a("span",{staticClass:"title"},[t._v("设备UUID:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filterParams.uuid,expression:"filterParams.uuid"}],staticClass:"input inputSys inputFilter",domProps:{value:t.filterParams.uuid},on:{input:function(e){e.target.composing||t.$set(t.filterParams,"uuid",e.target.value)}}})]),a("el-col",{attrs:{span:7}},[a("button",{staticClass:"button",on:{click:t.getData}},[t._v("查询")]),a("button",{staticClass:"button",staticStyle:{"margin-left":"20px"},on:{click:t.getTemplate}},[t._v("签发")])])],1),a("common-table",{staticStyle:{height:"calc(100vh - 220px)","overflow-y":"auto","margin-top":"20px"},attrs:{data:t.tableData,tableParams:t.json.tableParams},scopedSlots:t._u([{key:"last",fn:function(){return[a("el-table-column",{attrs:{label:"证书类型",prop:"license_type",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.license_type?a("div",[t._v("授权")]):a("div",[t._v("重置密码")])]}}])}),a("el-table-column",{attrs:{label:"产品名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.product.name))])]}}])}),a("el-table-column",{attrs:{label:"客户名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.user.real_name))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){return a.preventDefault(),t.download(e.$index,e.row)}}},[t._v("下载")]),a("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){return a.preventDefault(),t.editData(e.$index,e.row)}}},[t._v("详情")])]}}])})]},proxy:!0}])}),a("pagination",{attrs:{count:t.count,filterParams:t.filterParams},on:{getPageNum:t.getData}}),a("el-dialog",{attrs:{title:t.addFlag?"签发证书":"证书详情",width:"520px",visible:t.dialogVisible},on:{close:function(e){return t.dialogClose("ruleForm")},"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticStyle:{padding:"30px 30px 30px 0"}},[a("el-form",{ref:"ruleForm",staticStyle:{"padding-top":"0px"},attrs:{model:t.dialogForm,"label-width":"100px","label-position":"right",rules:t.rules}},[t.addFlag?a("el-form-item",{staticClass:"inputLab",attrs:{label:"选择模板",prop:"tempID"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:t.temSelect},model:{value:t.dialogForm.tempID,callback:function(e){t.$set(t.dialogForm,"tempID",e)},expression:"dialogForm.tempID"}},t._l(t.temArr,(function(t){return a("el-option",{key:t.ID,attrs:{label:t.name,value:t.ID}})})),1)],1):t._e(),a("el-form-item",{staticClass:"inputLab",attrs:{label:"产品名称"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:""},model:{value:t.dialogForm.product_id,callback:function(e){t.$set(t.dialogForm,"product_id",e)},expression:"dialogForm.product_id"}},t._l(t.appArr,(function(t){return a("el-option",{key:t.ID,attrs:{label:t.name,value:t.ID}})})),1)],1),a("el-form-item",{staticClass:"inputLab",attrs:{label:"客户名称",prop:"user_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:!t.addFlag},model:{value:t.dialogForm.user_id,callback:function(e){t.$set(t.dialogForm,"user_id",e)},expression:"dialogForm.user_id"}},t._l(t.userArr,(function(t){return a("el-option",{key:t.ID,attrs:{label:t.real_name,value:t.ID}})})),1)],1),a("el-form-item",{staticClass:"inputLab",attrs:{label:"设备UUID",prop:"uuid"}},[a("el-input",{attrs:{disabled:!t.addFlag},model:{value:t.dialogForm.uuid,callback:function(e){t.$set(t.dialogForm,"uuid",e)},expression:"dialogForm.uuid"}})],1),a("el-form-item",{staticClass:"inputLab",attrs:{label:"证书种类",prop:"license_type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:""},model:{value:t.dialogForm.license_type,callback:function(e){t.$set(t.dialogForm,"license_type",e)},expression:"dialogForm.license_type"}},[a("el-option",{attrs:{value:"0",label:"授权"}}),a("el-option",{attrs:{value:"1",label:"重置密码"}})],1)],1),a("el-form-item",{staticClass:"inputLab",attrs:{label:"授权天数",prop:"date_nums"}},[a("el-input",{attrs:{disabled:!t.addFlag},model:{value:t.dialogForm.date_nums,callback:function(e){t.$set(t.dialogForm,"date_nums",e)},expression:"dialogForm.date_nums"}})],1),t._l(t.dialogForm.license_data,(function(e,i,s){return a("div",{key:s,staticStyle:{"margin-top":"8px"}},[a("el-form-item",{staticClass:"inputLab",attrs:{label:e.description?e.description:i,prop:i}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],staticClass:"input inputSys inputFilter",class:{inputDisabled:e.fixed},staticStyle:{"margin-left":"10px",width:"calc(100% - 30px)"},attrs:{disabled:e.fixed&&!t.addFlag},domProps:{value:e.value},on:{input:function(a){a.target.composing||t.$set(e,"value",a.target.value)}}})]),e.tooltip?a("el-tooltip",{staticClass:"ml10",attrs:{content:e.tooltip,placement:"right"}},[a("i",{staticClass:"iconfont"},[t._v("")])]):t._e()],1)})),a("el-form-item",{staticClass:"inputLab",attrs:{label:"证书描述"}},[a("el-input",{attrs:{type:"textarea",disabled:!t.addFlag},model:{value:t.dialogForm.description,callback:function(e){t.$set(t.dialogForm,"description",e)},expression:"dialogForm.description"}})],1),a("div",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"delButton",attrs:{type:"button"},on:{click:function(e){return t.cancelEdit("ruleForm")}}},[t._v("取消")]),t.addFlag?a("button",{staticClass:"button",staticStyle:{"margin-left":"60px"},attrs:{type:"button"},on:{click:function(e){return t.submitEdit("ruleForm")}}},[t._v("提交")]):t._e()])],2)],1)])],1)},et=[];a("c1df");const at="/api/license",it="/api/license/user",st={Get(t={}){return y(at,t)},GetDetail(t,e={}){return y(`${at}/${t}`,e)},Post(t){return F(at,t)},PostG(t){return F(it,t)}},lt="/api/template",rt={Get(t={}){return y(lt,t)},GetDetail(t,e={}){return y(`${lt}/${t}`,e)},Put(t,e){return x(`${lt}/${t}`,e)},Post(t){return F(lt,t)},Delete(t){return A(lt+"/"+t)}},ot="/api/user/info",nt={Get(t={}){return y(ot,t)},GetDetail(t,e={}){return y(`${ot}/${t}`,e)},Post(t){return F(ot,t)},Put(t){return x(ot,t)},Delete(t){return A(ot+"?userIds="+JSON.stringify(t))}},dt="/api/product",ct="/api/product/info",ut={Get(t={}){return y(dt,t)},Get_INFO(t={}){return y(ct,t)},GetDetail(t,e={}){return y(`${dt}/${t}`,e)},Post(t){return F(dt,t)},Put(t){return x(dt,t)},Delete(t){return A(dt+"?productIds="+JSON.stringify(t))}};var pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{attrs:{data:t.data,"header-cell-style":t.tableHeaderColor,"cell-style":t.cellStyle,size:"medium",fit:!0,stripe:""}},[t._t("first"),t._l(Object.entries(t.tableParams),(function(e,i){return[Object.is(typeof e[1],"object")?a("el-table-column",{key:i,attrs:{prop:e[0],label:t.$t(e[1].label),width:e[1].width,align:"center"}}):t._e()]})),t._t("last")],2)},mt=[],gt={data(){return{}},props:{data:{required:!0,type:Array},tableParams:{required:!0,type:Object}},methods:{tableHeaderColor({row:t,column:e,rowIndex:a,columnIndex:i}){if(0===a)return"background-color:rgba(58,116,255,0.05);box-shadow:0px -1px 0px 0px rgba(235,238,245,1);color:rgba(0,0,0,0.85);font-weight:500;font-size:12px;border:0;border-bottom: 1px solid #ebeef5;height:22px;line-height:22px"},cellStyle(t,e,a,i){return"background: white;font-size:12px;border: none;border-bottom: 1px solid #ebeef5;padding: 7px;color: rgba(48,49,51,1);"}}},ft=gt,ht=(a("41e5"),Object(n["a"])(ft,pt,mt,!1,null,null,null)),bt=ht.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rowColCenter",staticStyle:{position:"fixed",left:"180px",bottom:"21px；width: calc(100vw - 144px)"}},[a("el-pagination",{attrs:{"current-page":t.filterParams.pageNum,"page-size":t.filterParams.pageSize,layout:"total, prev, pager, next, jumper",total:t.count},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){return t.$set(t.filterParams,"pageNum",e)},"update:current-page":function(e){return t.$set(t.filterParams,"pageNum",e)}}})],1)},vt=[],yt={props:{count:{type:Number,required:!0},filterParams:{type:Object,required:!0}},data(){return{}},methods:{handleCurrentChange(t){this.filterParams.pageNum=t,this.$emit("getPageNum",this.filterParams)}}},Ft=yt,xt=Object(n["a"])(Ft,_t,vt,!1,null,"1816dc26",null),At=xt.exports;let kt=a("9881").json;var Ct={components:{CommonTable:bt,Pagination:At},data(){return{json:kt,temArr:[],userArr:[],appArr:[],temObj:{},tableData:[],count:0,filterParams:{pageSize:12,pageNum:1,license_type:"",uuid:"",product_id:"",start_time:"",end_time:""},pickerOptionsStart:{disabledDate:t=>{if(this.filterParams.start_time)return t.getTime()>new Date(this.filterParams.end_time).getTime()}},pickerOptionsEnd:{disabledDate:t=>{if(this.filterParams.end_time)return t.getTime()<new Date(this.filterParams.start_time).getTime()}},dialogVisible:!1,dialogVisibleD:!1,addFlag:!0,dialogForm:{tempID:"",product_id:"",user_id:"",uuid:"",description:"",license_type:"",date_nums:90,license_data:{}},rules:{tempID:[{required:!0,message:"*模板不能为空！",trigger:"click"}],user_id:[{required:!0,message:"*客户不能为空！",trigger:"click"}],uuid:[{required:!0,message:"*uuid不能为空！",trigger:"blur"}],product_id:[{required:!1,message:"*产品不能为空",trigger:"click"}]},detailForm:{}}},created(){this.queryTemData(),this.queryUserData(),this.queryAppData(),this.getData()},methods:{queryTemData(){let t={};rt.Get().then(e=>{e&&e.data&&200==e.data.code&&(this.temArr=e.data.data.data,this.temArr.forEach(e=>{t[e.ID]=e}),this.temObj=t)})},queryUserData(){nt.Get().then(t=>{t&&t.data&&200==t.data.code&&(this.userArr=t.data.data.data)})},queryAppData(){ut.Get().then(t=>{t&&t.data&&200==t.data.code&&(this.appArr=t.data.data.data)})},temSelect(t){this.dialogForm.product_id=this.temObj[t].product_id,this.dialogForm.license_type=this.temObj[t].license_type+"",this.dialogForm.date_nums=this.temObj[t].date_nums,this.dialogForm.license_data=this.temObj[t].template_data},getData(){let t={...this.filterParams};t.license_type=t.license_type?Number(t.license_type):"",st.Get(t).then(t=>{t&&t.data&&200==t.data.code&&(this.tableData=t.data.data.data,this.count=t.data.data.count)})},getTemplate(){this.dialogVisible=!0,this.addFlag=!0},download(t,e){const a=sessionStorage.getItem("token"),i=document.createElement("a");i.setAttribute("href",`/api/license/${e.ID}/download?Authorization=${a}`),i.click()},handleDialogClose(){this.dialogVisibleD=!1},dialogClose(t){this.dialogForm={tempID:"",product_id:"",user_id:"",uuid:"",description:"",license_type:"",date_nums:90,license_data:{}},this.$refs[t].resetFields(),this.dialogVisibleD=!1},editData(t,e){this.addFlag=!1,this.dialogVisible=!0,this.dialogForm={product_id:e.product_id,user_id:e.user_id,uuid:e.uuid,description:e.description,license_type:e.license_type+"",date_nums:e.date_nums,license_data:e.license_data}},cancelEdit(t){this.$refs[t].resetFields(),this.dialogVisible=!1},submitEdit(t){if(this.addFlag){let e={product_id:this.dialogForm.product_id,user_id:this.dialogForm.user_id,uuid:this.dialogForm.uuid,description:this.dialogForm.description,license_type:Number(this.dialogForm.license_type),date_nums:this.dialogForm.date_nums,license_data:this.dialogForm.license_data};this.$refs[t].validate(t=>{t&&st.Post(e).then(t=>{200===t.data.code&&(this.$message({showClose:!0,message:"添加成功!",type:"success"}),this.dialogVisible=!1,this.getData())})})}else this.dialogVisible=!1}}},Dt=Ct,wt=(a("2c4d"),Object(n["a"])(Dt,tt,et,!1,null,null,null)),jt=wt.exports,St=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{height:"30px",margin:"20px 0 0 20px"}},[a("el-col",{attrs:{span:6}},[a("span",{staticClass:"title",staticStyle:{"margin-right":"20px"}},[t._v("产品名称:")]),a("el-select",{model:{value:t.searchForm.product_id,callback:function(e){t.$set(t.searchForm,"product_id",e)},expression:"searchForm.product_id"}},t._l(t.appData,(function(t,e){return a("el-option",{key:e,attrs:{value:t.ID,label:t.name}})})),1)],1),a("el-col",{attrs:{span:6}},[a("span",{staticClass:"title",staticStyle:{"margin-left":"5px"}},[t._v("模板名称:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.Name,expression:"searchForm.Name"}],staticClass:"input inputSys inputFilter",domProps:{value:t.searchForm.Name},on:{input:function(e){e.target.composing||t.$set(t.searchForm,"Name",e.target.value)}}})]),a("el-col",{attrs:{span:6}},[a("span",{staticClass:"title"},[t._v("证书类型:")]),a("el-select",{staticStyle:{"margin-left":"10px",width:"200px"},model:{value:t.searchForm.license_type,callback:function(e){t.$set(t.searchForm,"license_type",e)},expression:"searchForm.license_type"}},[a("el-option",{attrs:{value:"0",label:"授权"}}),a("el-option",{attrs:{value:"1",label:"重置密码"}})],1)],1),a("el-col",{attrs:{span:6}},[a("button",{staticClass:"button",staticStyle:{"margin-right":"20px"},on:{click:t.queryData}},[t._v("查询")]),a("button",{staticClass:"button",on:{click:t.addData}},[t._v("新增模板")])])],1),a("common-table",{staticStyle:{height:"calc(100vh - 180px)","overflow-y":"auto","margin-top":"20px"},attrs:{data:t.tableData,tableParams:t.json.tableParams},scopedSlots:t._u([{key:"last",fn:function(){return[a("el-table-column",{attrs:{label:"归属产品",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.product.name))])]}}])}),a("el-table-column",{attrs:{label:"证书类型",prop:"license_type",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.license_type?a("div",[t._v("授权")]):a("div",[t._v("重置密码")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"240",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){return a.preventDefault(),t.editData(e.$index,e.row)}}},[t._v("修改")]),a("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){return a.preventDefault(),t.deleteData(e.$index,e.row)}}},[t._v("删除")]),a("el-popover",{attrs:{placement:"top",width:"100",trigger:"click"}},[a("div",{staticStyle:{"text-align":"center",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:t.onSingle}},[t._v("单个签发")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:t.onMultiple}},[t._v("批量签发")])],1),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("签发")])],1)]}}])})]},proxy:!0}])}),a("pagination",{attrs:{count:t.count,filterParams:t.searchForm},on:{getPageNum:t.queryData}}),a("el-dialog",{attrs:{title:t.addFlag?"新增模板":"修改模板","before-close":t.handleDialogEditClose,width:"500px",visible:t.dialogEditVisible},on:{"update:visible":function(e){t.dialogEditVisible=e}}},[a("el-dialog",{attrs:{title:"扩展参数",visible:t.innerVisible,"append-to-body":""},on:{close:t.onCloseEx,"update:visible":function(e){t.innerVisible=e}}},[a("div",{staticStyle:{overflow:"hidden",padding:"0 20px 20px 0"}},[a("div",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.onAddEx}},[t._v("新增")])],1),a("div",[a("el-row",{staticStyle:{margin:"10px 0 10px 0","text-align":"center"},attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("span",[t._v("description")])]),a("el-col",{attrs:{span:4}},[a("span",[t._v("key")])]),a("el-col",{attrs:{span:4}},[a("span",[t._v("value")])]),a("el-col",{attrs:{span:4}},[a("span",[t._v("tooltip")])]),a("el-col",{attrs:{span:4}},[a("span",[t._v("type")])]),a("el-col",{attrs:{span:2}},[a("span",[t._v("fixed")])])],1),t._l(t.dialogForm.template_dataF,(function(e,i){return a("el-row",{key:i,staticStyle:{margin:"0 0 10px 0"},attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("el-input",{model:{value:e.description,callback:function(a){t.$set(e,"description",a)},expression:"item.description"}})],1),a("el-col",{attrs:{span:4}},[a("el-input",{model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"item.key"}})],1),a("el-col",{attrs:{span:4}},[a("el-input",{model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}})],1),a("el-col",{attrs:{span:4}},[a("el-input",{model:{value:e.tooltip,callback:function(a){t.$set(e,"tooltip",a)},expression:"item.tooltip"}})],1),a("el-col",{attrs:{span:4}},[a("el-select",{model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"item.type"}},[a("el-option",{attrs:{value:"int",label:"int"}}),a("el-option",{attrs:{value:"uint",label:"uint"}}),a("el-option",{attrs:{value:"float",label:"float"}}),a("el-option",{attrs:{value:"string",label:"string"}}),a("el-option",{attrs:{value:"date",label:"date"}}),a("el-option",{attrs:{value:"datetime",label:"datetime"}}),a("el-option",{attrs:{value:"time",label:"time"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-switch",{model:{value:e.fixed,callback:function(a){t.$set(e,"fixed",a)},expression:"item.fixed"}})],1),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.onDeleteEx(i)}}},[t._v("删除")])],1)],1)}))],2),a("div",{staticStyle:{"text-align":"center"}},[a("button",{staticClass:"delButton",staticStyle:{"margin-right":"30px"},attrs:{type:"button"},on:{click:t.onCancleEx}},[t._v("取消")]),a("button",{staticClass:"button",attrs:{type:"button"},on:{click:t.onSaveEx}},[t._v("保存")])])])]),a("el-form",{ref:"dialogForm",staticStyle:{"padding-top":"0px"},attrs:{inline:!0,model:t.dialogForm,"label-width":"100px","label-position":"right",rules:t.editRules}},[a("el-form-item",{staticClass:"inputLab",attrs:{label:"模版名称",prop:"name"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.dialogForm.name,expression:"dialogForm.name"}],staticClass:"input inputSys inputFilter",staticStyle:{"margin-left":"10px"},domProps:{value:t.dialogForm.name},on:{input:function(e){e.target.composing||t.$set(t.dialogForm,"name",e.target.value)}}})]),a("el-form-item",{staticClass:"inputLab",attrs:{label:"产品",prop:"product_id"}},[a("el-select",{staticStyle:{"margin-left":"10px",width:"200px"},model:{value:t.dialogForm.product_id,callback:function(e){t.$set(t.dialogForm,"product_id",e)},expression:"dialogForm.product_id"}},t._l(t.appData,(function(t,e){return a("el-option",{key:e,attrs:{value:t.ID,label:t.name}})})),1)],1),a("el-form-item",{staticClass:"inputLab",attrs:{label:"模板描述",prop:"description"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.dialogForm.description,expression:"dialogForm.description"}],staticClass:"input inputSys inputFilter",staticStyle:{"margin-left":"10px"},domProps:{value:t.dialogForm.description},on:{input:function(e){e.target.composing||t.$set(t.dialogForm,"description",e.target.value)}}})]),a("el-form-item",{staticClass:"inputLab",attrs:{label:"证书种类",prop:"license_type"}},[a("el-select",{staticStyle:{"margin-left":"10px",width:"200px"},model:{value:t.dialogForm.license_type,callback:function(e){t.$set(t.dialogForm,"license_type",e)},expression:"dialogForm.license_type"}},[a("el-option",{attrs:{value:"0",label:"授权"}}),a("el-option",{attrs:{value:"1",label:"重置密码"}})],1)],1),a("el-form-item",{staticClass:"inputLab",attrs:{label:"授权天数",prop:"date_nums"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.dialogForm.date_nums,expression:"dialogForm.date_nums"}],staticClass:"input inputSys inputFilter",staticStyle:{"margin-left":"10px"},domProps:{value:t.dialogForm.date_nums},on:{input:function(e){e.target.composing||t.$set(t.dialogForm,"date_nums",e.target.value)}}})]),t._l(t.dialogForm.template_data,(function(e,i,s){return a("div",{key:s,staticStyle:{"margin-top":"8px"}},[a("el-form-item",{staticClass:"inputLab",attrs:{label:e.description?e.description:i,prop:i}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],staticClass:"input inputSys inputFilter",class:{inputDisabled:e.fixed},staticStyle:{"margin-left":"10px"},attrs:{disabled:e.fixed},domProps:{value:e.value},on:{input:function(a){a.target.composing||t.$set(e,"value",a.target.value)}}})]),e.tooltip?a("el-tooltip",{staticClass:"ml10",attrs:{content:e.tooltip,placement:"right"}},[a("i",{staticClass:"iconfont"},[t._v("")])]):t._e()],1)})),a("div",{staticStyle:{"text-align":"center","padding-bottom":"20px"}},[a("button",{staticClass:"button",staticStyle:{"margin-right":"30px"},attrs:{type:"button"},on:{click:t.addInner}},[t._v("扩展参数")]),a("button",{staticClass:"delButton",staticStyle:{"margin-right":"30px"},attrs:{type:"button"},on:{click:function(e){return t.cancelEdit("dialogForm")}}},[t._v("取消")]),a("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){return t.submitEdit("dialogForm")}}},[t._v("提交")])])],2)],1)],1)},Pt=[];let $t=a("590e").json;var It={components:{CommonTable:bt,Pagination:At},data(){return{json:$t,tableData:[],count:0,searchForm:{pageSize:12,pageNum:1,product_id:"",name:"",license_type:""},appData:[],dialogVisible:!1,detailForm:{},innerVisible:!1,dialogEditVisible:!1,addFlag:!0,dialogForm:{ID:null,name:"",product_id:"",description:"",license_type:"",date_nums:90,template_dataF:[],template_data:{}},editRules:{name:[{required:!0,message:"*模版名称不能为空",trigger:"change"}],product_id:[{required:!0,message:"*产品不能为空",trigger:"change"}],description:[{required:!0,message:"*模板描述不能为空",trigger:"blur"}],license_type:[{required:!0,message:"*证书种类不能为空",trigger:"change"}]},addFormArr:[{tooltip:"",key:"",value:"",description:"",type:""}]}},created(){this.queryAppData(),this.queryData()},methods:{queryData(){let t={...this.searchForm};t["license_type"]&&(t["license_type"]=Number(t["license_type"])),rt.Get(t).then(t=>{t&&t.data&&200==t.data.code&&(this.tableData=t.data.data.data,this.count=t.data.data.count)})},queryAppData(){ut.Get().then(t=>{if(t&&t.data&&200==t.data.code){let e=t.data.data.data,a=[];e.forEach(t=>{a.push({ID:t.ID,name:t.name})}),this.appData=a}})},addData(){this.addFlag=!0,this.dialogEditVisible=!0},addInner(){let t=[];if(this.dialogForm.template_data)for(let e in this.dialogForm.template_data)t.push({key:e,...this.dialogForm.template_data[e]});this.dialogForm.template_dataF=t,this.innerVisible=!0},onAddEx(){this.dialogForm.template_dataF.push({tooltip:"",key:"",value:"",description:"",type:"",fixed:!1})},onDeleteEx(t){this.dialogForm.template_dataF.splice(t,1)},onSaveEx(){let t={},e=!0;this.dialogForm.template_dataF&&this.dialogForm.template_dataF.forEach(a=>{a.key?t[a.key]=a:e=!1}),e?(this.dialogForm.template_data=t,this.innerVisible=!1):this.$message({showClose:!0,message:"扩展参数key值不能为空！",type:"error"})},onCancleEx(){this.innerVisible=!1},onCloseEx(){this.addFormArr=[]},onSingle(){this.$router.push({name:"certificate"})},onMultiple(){this.$router.push({name:"certificateM"})},editData(t,e){this.addFlag=!1,this.dialogEditVisible=!0,this.dialogForm={ID:e.ID,name:e.name,product_id:e.product_id,description:e.description,license_type:e.license_type+"",date_nums:e.date_nums,template_data:e.template_data,template_dataF:[]}},deleteData(t,e){this.$confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this._deleteData(e)}).catch(()=>{})},_deleteData(t){rt.Delete(t.ID).then(t=>{200===t.data.code&&(this.$message({showClose:!0,message:"删除成功!",type:"success"}),this.dialogVisible=!1,this.queryData())})},cancelEdit(t){this.$refs[t].resetFields(),this.dialogEditVisible=!1},submitEdit(t){let e={name:this.dialogForm.name,product_id:this.dialogForm.product_id,description:this.dialogForm.description,license_type:Number(this.dialogForm.license_type),date_nums:this.dialogForm.date_nums,template_data:this.dialogForm.template_data};this.addFlag?this.$refs[t].validate(t=>{t&&rt.Post(e).then(t=>{200===t.data.code&&(this.$message.success("新增模板成功！"),this.dialogEditVisible=!1,this.queryData())})}):this.$refs[t].validate(t=>{t&&rt.Put(this.dialogForm.ID,e).then(t=>{200===t.data.code&&(this.$message.success("修改模板成功！"),this.dialogEditVisible=!1,this.queryData())})})},tableAdd(t,e){rt.GetDetail(e.id).then(t=>{this.addForm=t.data.data,this.dialogAddVisible=!0})},handleDialogClose(){this.dialogVisible=!1},handleDialogEditClose(){this.$refs.dialogForm.resetFields(),this.dialogEditVisible=!1,this.dialogForm={ID:null,name:"",product_id:"",description:"",license_type:"",date_nums:90,template_dataF:[],template_data:{}}}}},Et=It,Ot=Object(n["a"])(Et,St,Pt,!1,null,null,null),Bt=Ot.exports,Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{height:"30px",margin:"20px 0 0 20px"}},[a("el-col",{attrs:{span:6}},[a("span",{staticClass:"title",staticStyle:{"margin-left":"5px"}},[t._v("产品名称:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.name,expression:"searchForm.name"}],staticClass:"input inputSys inputFilter",domProps:{value:t.searchForm.name},on:{input:function(e){e.target.composing||t.$set(t.searchForm,"name",e.target.value)}}})]),a("el-col",{attrs:{span:6}},[a("button",{staticClass:"button",on:{click:t.queryData}},[t._v("查询")]),a("button",{staticClass:"button",staticStyle:{"margin-left":"20px"},on:{click:t.addData}},[t._v("新增")])])],1),a("common-table",{staticStyle:{height:"calc(100vh - 220px)","overflow-y":"auto","margin-top":"20px"},attrs:{data:t.tableData,tableParams:t.json.tableParams},scopedSlots:t._u([{key:"last",fn:function(){return[a("el-table-column",{attrs:{label:"操作",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._e(),a("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){return a.preventDefault(),t.deleteData(e.$index,e.row)}}},[t._v("删除")])]}}])})]},proxy:!0}])}),a("pagination",{attrs:{count:t.count,filterParams:t.searchForm},on:{getPageNum:t.queryData}}),a("el-dialog",{attrs:{title:t.addFlag?"新增产品":"修改产品",width:"580px",visible:t.dialogVisible},on:{close:t.dialogClose,"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticStyle:{padding:"30px 30px 30px 0"}},[a("el-form",{ref:"ruleForm",staticStyle:{"padding-top":"0px"},attrs:{model:t.dialogForm,"label-width":"100px","label-position":"right",rules:t.rules}},[a("el-form-item",{staticClass:"inputLab",attrs:{label:"产品名称",prop:"name"}},[a("el-input",{model:{value:t.dialogForm.name,callback:function(e){t.$set(t.dialogForm,"name",e)},expression:"dialogForm.name"}})],1),a("el-form-item",{staticClass:"inputLab",attrs:{label:"产品类型",prop:"device_model"}},[a("el-input",{model:{value:t.dialogForm.device_model,callback:function(e){t.$set(t.dialogForm,"device_model",e)},expression:"dialogForm.device_model"}})],1),a("el-form-item",{staticClass:"inputLab",attrs:{label:"产品描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.dialogForm.description,callback:function(e){t.$set(t.dialogForm,"description",e)},expression:"dialogForm.description"}})],1),a("div",{staticStyle:{"text-align":"center"}},[a("button",{staticClass:"delButton",staticStyle:{"margin-right":"60px"},attrs:{type:"button"},on:{click:function(e){return t.cancelEdit("ruleForm")}}},[t._v("取消")]),a("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){return t.submitEdit("ruleForm")}}},[t._v("提交")])])],1)],1)])],1)},Nt=[];let qt=a("1fc7").json;var Tt={components:{CommonTable:bt,Pagination:At},data(){return{json:qt,tableData:[],count:0,searchForm:{pageSize:12,pageNum:1,name:""},dialogVisible:!1,addFlag:!0,dialogForm:{ID:"",name:"",description:"",device_model:""},rules:{name:[{required:!0,message:"产品名称不能为空！",trigger:"blur"}],device_model:[{required:!0,message:"产品类型不能为空！",trigger:"blur"}],licenseType:[{required:!0,message:"*证书种类不能为空",trigger:"change"}]}}},created(){this.queryData()},methods:{queryData(){let t=this.searchForm;ut.Get(t).then(t=>{t&&t.data&&200==t.data.code&&(this.tableData=t.data.data.data,this.count=t.data.data.count)})},addData(){this.addFlag=!0,this.dialogVisible=!0},editData(t,e){this.addFlag=!1,this.dialogVisible=!0,this.dialogForm={ID:e.ID,name:e.name,description:e.description,device_model:e.device_model}},deleteData(t,e){this.$confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this._deleteData(e)}).catch(()=>{})},_deleteData(t){let e=[t.ID];ut.Delete(e).then(t=>{t&&t.data&&200===t.data.code&&(this.$message({showClose:!0,message:"删除成功!",type:"success"}),this.dialogVisible=!1,this.queryData())})},cancelEdit(t){this.$refs[t].resetFields(),this.dialogVisible=!1},submitEdit(t){let e={name:this.dialogForm.name,description:this.dialogForm.description,device_model:this.dialogForm.device_model};this.addFlag?this.$refs[t].validate(t=>{t&&ut.Post(e).then(t=>{t&&t.data&&200===t.data.code&&(this.$message({showClose:!0,message:"添加成功!",type:"success"}),this.dialogVisible=!1,this.queryData())})}):this.$refs[t].validate(t=>{t&&ut.Put(this.dialogForm.id,e).then(t=>{t&&t.data&&200===t.data.code&&(this.$message({showClose:!0,message:"修改成功!",type:"success"}),this.dialogVisible=!1,this.queryData())})})},dialogClose(){this.addFlag=!1,this.dialogForm={ID:"",name:"",description:"",device_model:""}}}},Ut=Tt,Gt=(a("3c80"),Object(n["a"])(Ut,Vt,Nt,!1,null,null,null)),Lt=Gt.exports,Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{height:"30px",margin:"20px 0 0 20px"}},[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"title",staticStyle:{"margin-left":"28px"}},[t._v("时间:")]),a("el-date-picker",{staticStyle:{"margin-left":"20px",width:"185px"},attrs:{type:"datetime","picker-options":t.pickerOptionsStart,"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择开始时间"},model:{value:t.filterParams.start_time,callback:function(e){t.$set(t.filterParams,"start_time",e)},expression:"filterParams.start_time"}}),a("span",{staticStyle:{"margin-left":"10px"}},[t._v("-")]),a("el-date-picker",{staticStyle:{"margin-left":"10px",width:"185px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":t.pickerOptionsEnd,placeholder:"选择结束时间"},model:{value:t.filterParams.end_time,callback:function(e){t.$set(t.filterParams,"end_time",e)},expression:"filterParams.end_time"}})],1),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"title",staticStyle:{"margin-left":"5px"}},[t._v("产品名称:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filterParams.product_id,expression:"filterParams.product_id"}],staticClass:"input inputSys inputFilter",domProps:{value:t.filterParams.product_id},on:{input:function(e){e.target.composing||t.$set(t.filterParams,"product_id",e.target.value)}}})])],1),a("div",{staticStyle:{width:"calc(100vw - 170px)",height:"30px",margin:"10px 0 0 20px"}},[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"title"},[t._v("证书类型:")]),a("el-select",{staticClass:"selectFilter",model:{value:t.filterParams.license_type,callback:function(e){t.$set(t.filterParams,"license_type",e)},expression:"filterParams.license_type"}},[a("el-option",{attrs:{value:"0",label:"授权"}}),a("el-option",{attrs:{value:"1",label:"重置密码"}})],1)],1),a("el-col",{attrs:{span:12}},[a("button",{staticClass:"button",on:{click:t.getData}},[t._v("查询")])])],1),a("common-table",{staticStyle:{height:"calc(100vh - 220px)","overflow-y":"auto","margin-top":"20px"},attrs:{data:t.tableData,tableParams:t.json.tableParams},scopedSlots:t._u([{key:"last",fn:function(){return[a("el-table-column",{attrs:{label:"证书类型",prop:"license_type",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.license_type?a("div",[t._v("授权")]):a("div",[t._v("重置密码")])]}}])}),a("el-table-column",{attrs:{label:"产品名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.product.name))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){return a.preventDefault(),t.toLink(e.$index,e.row)}}},[t._v("签发")]),a("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){return a.preventDefault(),t.editData(e.$index,e.row)}}},[t._v("详情")])]}}])})]},proxy:!0}])}),a("pagination",{attrs:{count:t.count,filterParams:t.filterParams},on:{getPageNum:t.getData}}),a("el-dialog",{attrs:{title:"查看详情",width:"520px",visible:t.dialogVisible},on:{close:t.dialogClose,"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticStyle:{padding:"30px 30px 30px 0"}},[a("el-form",{ref:"ruleForm",staticStyle:{"padding-top":"0px"},attrs:{model:t.dialogForm,"label-width":"120px","label-position":"right"}},[a("el-form-item",{staticClass:"inputLab",attrs:{label:"产品名称"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"",disabled:""},model:{value:t.dialogForm.product_id,callback:function(e){t.$set(t.dialogForm,"product_id",e)},expression:"dialogForm.product_id"}},t._l(t.appArr,(function(t){return a("el-option",{key:t.ID,attrs:{label:t.name,value:t.ID}})})),1)],1),a("el-form-item",{staticClass:"inputLab",attrs:{label:"签发数量"}},[a("el-input",{attrs:{disabled:""},model:{value:t.dialogForm.nums,callback:function(e){t.$set(t.dialogForm,"nums",e)},expression:"dialogForm.nums"}})],1),a("el-form-item",{staticClass:"inputLab",attrs:{label:"证书种类"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:""},model:{value:t.dialogForm.license_type,callback:function(e){t.$set(t.dialogForm,"license_type",e)},expression:"dialogForm.license_type"}},[a("el-option",{attrs:{value:"0",label:"授权"}}),a("el-option",{attrs:{value:"1",label:"重置密码"}})],1)],1),a("el-form-item",{staticClass:"inputLab",attrs:{label:"授权天数"}},[a("el-input",{attrs:{disabled:""},model:{value:t.dialogForm.date_nums,callback:function(e){t.$set(t.dialogForm,"date_nums",e)},expression:"dialogForm.date_nums"}})],1),t._l(t.dialogForm.license_data,(function(e,i,s){return a("div",{key:s,staticStyle:{"margin-top":"8px"}},[a("el-form-item",{staticClass:"inputLab",attrs:{label:e.description?e.description:i,prop:i}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],staticClass:"input inputSys inputFilter",class:{inputDisabled:e.fixed},staticStyle:{width:"calc(100% - 20px)","margin-left":"0"},attrs:{disabled:""},domProps:{value:e.value},on:{input:function(a){a.target.composing||t.$set(e,"value",a.target.value)}}})]),e.tooltip?a("el-tooltip",{staticClass:"ml10",attrs:{content:e.tooltip,placement:"right"}},[a("i",{staticClass:"iconfont"},[t._v("")])]):t._e()],1)})),a("el-form-item",{staticClass:"inputLab",attrs:{label:"证书描述"}},[a("el-input",{attrs:{type:"textarea",disabled:""},model:{value:t.dialogForm.description,callback:function(e){t.$set(t.dialogForm,"description",e)},expression:"dialogForm.description"}})],1),a("div",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"delButton",attrs:{type:"button"},on:{click:t.cancelEdit}},[t._v("取消")])])],2)],1)])],1)},zt=[];const Rt="/api/good",Qt={Get(t={}){return y(Rt,t)},GetDetail(t,e={}){return y(`${Rt}/${t}`,e)},Put(t,e){return x(`${Rt}/${t}`,e)},Post(t){return F(Rt,t)},Delete(t){return A(Rt+"?goodIds="+JSON.stringify(t))}};let Kt=a("1774").json;var Ht={components:{CommonTable:bt,Pagination:At},data(){return{json:Kt,temArr:[],userArr:[],appArr:[],temObj:{},tableData:[],count:0,filterParams:{pageSize:12,pageNum:1,license_type:"",nums:0,product_id:"",start_time:"",end_time:""},pickerOptionsStart:{disabledDate:t=>{if(this.filterParams.start_time)return t.getTime()>new Date(this.filterParams.end_time).getTime()}},pickerOptionsEnd:{disabledDate:t=>{if(this.filterParams.end_time)return t.getTime()<new Date(this.filterParams.start_time).getTime()}},dialogVisible:!1,dialogVisibleD:!1,dialogForm:{ID:null,product_id:"",nums:0,description:"",license_type:"",date_nums:90,license_data:{}},detailForm:{}}},created(){this.queryTemData(),this.queryAppData(),this.getData()},methods:{queryTemData(){let t={};rt.Get().then(e=>{e&&e.data&&200==e.data.code&&(this.temArr=e.data.data.data,this.temArr.forEach(e=>{t[e.ID]=e}),this.temObj=t)})},queryAppData(){ut.Get().then(t=>{t&&t.data&&200==t.data.code&&(this.appArr=t.data.data.data)})},temSelect(t){this.dialogForm.product_id=this.temObj[t].product_id,this.dialogForm.license_type=this.temObj[t].license_type+"",this.dialogForm.date_nums=this.temObj[t].date_nums,this.dialogForm.license_data=this.temObj[t].template_data},getData(){let t={...this.filterParams};t.license_type=t.license_type?Number(t.license_type):"",Qt.Get(t).then(t=>{t&&t.data&&200==t.data.code&&(this.tableData=t.data.data.data,this.count=t.data.data.count)})},dialogClose(t){this.dialogForm={ID:null,product_id:"",nums:0,description:"",license_type:"",date_nums:90,license_data:{}},this.dialogVisibleD=!1},editData(t,e){this.dialogVisible=!0,this.dialogForm={ID:e.ID,product_id:e.product_id,nums:e.nums,description:e.description,license_type:e.license_type+"",date_nums:e.date_nums,license_data:e.license_data}},toLink(){this.$router.push({name:"certificateClient"})},cancelEdit(t){this.dialogVisible=!1}}},Wt=Ht,Xt=(a("ff7d"),Object(n["a"])(Wt,Mt,zt,!1,null,null,null)),Yt=Xt.exports,Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{height:"30px",margin:"20px 0 0 20px"}},[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"title",staticStyle:{"margin-left":"28px"}},[t._v("时间:")]),a("el-date-picker",{staticStyle:{"margin-left":"20px",width:"185px"},attrs:{type:"datetime","picker-options":t.pickerOptionsStart,"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择开始时间"},model:{value:t.filterParams.start_time,callback:function(e){t.$set(t.filterParams,"start_time",e)},expression:"filterParams.start_time"}}),a("span",{staticStyle:{"margin-left":"10px"}},[t._v("-")]),a("el-date-picker",{staticStyle:{"margin-left":"10px",width:"185px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":t.pickerOptionsEnd,placeholder:"选择结束时间"},model:{value:t.filterParams.end_time,callback:function(e){t.$set(t.filterParams,"end_time",e)},expression:"filterParams.end_time"}})],1),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"title",staticStyle:{"margin-left":"5px"}},[t._v("产品名称:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filterParams.product_id,expression:"filterParams.product_id"}],staticClass:"input inputSys inputFilter",domProps:{value:t.filterParams.product_id},on:{input:function(e){e.target.composing||t.$set(t.filterParams,"product_id",e.target.value)}}})])],1),a("div",{staticStyle:{width:"calc(100vw - 170px)",height:"30px",margin:"10px 0 0 20px"}},[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"title"},[t._v("证书类型:")]),a("el-select",{staticClass:"selectFilter",model:{value:t.filterParams.license_type,callback:function(e){t.$set(t.filterParams,"license_type",e)},expression:"filterParams.license_type"}},[a("el-option",{attrs:{value:"0",label:"授权"}}),a("el-option",{attrs:{value:"1",label:"重置密码"}})],1)],1),a("el-col",{attrs:{span:12}},[a("button",{staticClass:"button",on:{click:t.getData}},[t._v("查询")]),a("button",{staticClass:"button",staticStyle:{"margin-left":"20px"},on:{click:t.getTemplate}},[t._v("签发")])])],1),a("common-table",{staticStyle:{height:"calc(100vh - 220px)","overflow-y":"auto","margin-top":"20px"},attrs:{data:t.tableData,tableParams:t.json.tableParams},scopedSlots:t._u([{key:"last",fn:function(){return[a("el-table-column",{attrs:{label:"证书类型",prop:"license_type",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.license_type?a("div",[t._v("授权")]):a("div",[t._v("重置密码")])]}}])}),a("el-table-column",{attrs:{label:"产品名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.product.name))])]}}])}),a("el-table-column",{attrs:{label:"客户名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.user.real_name))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){return a.preventDefault(),t.deleteData(e.$index,e.row)}}},[t._v("删除")]),a("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){return a.preventDefault(),t.editData(e.$index,e.row)}}},[t._v("编辑")])]}}])})]},proxy:!0}])}),a("pagination",{attrs:{count:t.count,filterParams:t.filterParams},on:{getPageNum:t.getData}}),a("el-dialog",{attrs:{title:t.addFlag?"批量签发":"详情",width:"520px",visible:t.dialogVisible},on:{close:function(e){return t.dialogClose("ruleForm")},"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticStyle:{padding:"30px 30px 30px 0"}},[a("el-form",{ref:"ruleForm",staticStyle:{"padding-top":"0px"},attrs:{model:t.dialogForm,"label-width":"100px","label-position":"right",rules:t.rules}},[t.addFlag?a("el-form-item",{staticClass:"inputLab",attrs:{label:"选择模板",prop:"tempID"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:t.temSelect},model:{value:t.dialogForm.tempID,callback:function(e){t.$set(t.dialogForm,"tempID",e)},expression:"dialogForm.tempID"}},t._l(t.temArr,(function(t){return a("el-option",{key:t.ID,attrs:{label:t.name,value:t.ID}})})),1)],1):t._e(),a("el-form-item",{staticClass:"inputLab",attrs:{label:"产品名称"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:""},model:{value:t.dialogForm.product_id,callback:function(e){t.$set(t.dialogForm,"product_id",e)},expression:"dialogForm.product_id"}},t._l(t.appArr,(function(t){return a("el-option",{key:t.ID,attrs:{label:t.name,value:t.ID}})})),1)],1),a("el-form-item",{staticClass:"inputLab",attrs:{label:"客户名称",prop:"user_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.dialogForm.user_id,callback:function(e){t.$set(t.dialogForm,"user_id",e)},expression:"dialogForm.user_id"}},t._l(t.userArr,(function(t){return a("el-option",{key:t.ID,attrs:{label:t.real_name,value:t.ID}})})),1)],1),a("el-form-item",{staticClass:"inputLab",attrs:{label:"签发数量",prop:"nums"}},[a("el-input",{model:{value:t.dialogForm.nums,callback:function(e){t.$set(t.dialogForm,"nums",e)},expression:"dialogForm.nums"}})],1),a("el-form-item",{staticClass:"inputLab",attrs:{label:"证书种类",prop:"license_type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:""},model:{value:t.dialogForm.license_type,callback:function(e){t.$set(t.dialogForm,"license_type",e)},expression:"dialogForm.license_type"}},[a("el-option",{attrs:{value:"0",label:"授权"}}),a("el-option",{attrs:{value:"1",label:"重置密码"}})],1)],1),a("el-form-item",{staticClass:"inputLab",attrs:{label:"授权天数",prop:"date_nums"}},[a("el-input",{model:{value:t.dialogForm.date_nums,callback:function(e){t.$set(t.dialogForm,"date_nums",e)},expression:"dialogForm.date_nums"}})],1),t._l(t.dialogForm.license_data,(function(e,i,s){return a("div",{key:s,staticStyle:{"margin-top":"8px"}},[a("el-form-item",{staticClass:"inputLab",attrs:{label:e.description?e.description:i,prop:i}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],staticClass:"input inputSys inputFilter",class:{inputDisabled:e.fixed},staticStyle:{"margin-left":"10px",width:"calc(100% - 30px)"},attrs:{disabled:e.fixed},domProps:{value:e.value},on:{input:function(a){a.target.composing||t.$set(e,"value",a.target.value)}}})]),e.tooltip?a("el-tooltip",{staticClass:"ml10",attrs:{content:e.tooltip,placement:"right"}},[a("i",{staticClass:"iconfont"},[t._v("")])]):t._e()],1)})),a("el-form-item",{staticClass:"inputLab",attrs:{label:"证书描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.dialogForm.description,callback:function(e){t.$set(t.dialogForm,"description",e)},expression:"dialogForm.description"}})],1),a("div",{staticStyle:{"text-align":"center"}},[a("button",{staticClass:"delButton",staticStyle:{"margin-right":"60px"},attrs:{type:"button"},on:{click:function(e){return t.cancelEdit("ruleForm")}}},[t._v("取消")]),a("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){return t.submitEdit("ruleForm")}}},[t._v("提交")])])],2)],1)])],1)},Jt=[];let te=a("068e").json;var ee={components:{CommonTable:bt,Pagination:At},data(){return{json:te,temArr:[],userArr:[],appArr:[],temObj:{},tableData:[],count:0,filterParams:{pageSize:12,pageNum:1,license_type:"",nums:0,product_id:"",start_time:"",end_time:""},pickerOptionsStart:{disabledDate:t=>{if(this.filterParams.start_time)return t.getTime()>new Date(this.filterParams.end_time).getTime()}},pickerOptionsEnd:{disabledDate:t=>{if(this.filterParams.end_time)return t.getTime()<new Date(this.filterParams.start_time).getTime()}},dialogVisible:!1,dialogVisibleD:!1,addFlag:!0,dialogForm:{ID:null,tempID:"",product_id:"",user_id:"",nums:0,description:"",license_type:"",date_nums:90,license_data:{}},rules:{tempID:[{required:!0,message:"*模板不能为空！",trigger:"click"}],user_id:[{required:!0,message:"*客户不能为空！",trigger:"click"}],nums:[{required:!0,message:"*签发数量不能为空！",trigger:"blur"}],product_id:[{required:!1,message:"*产品不能为空",trigger:"click"}]},detailForm:{}}},created(){this.queryTemData(),this.queryUserData(),this.queryAppData(),this.getData()},methods:{queryTemData(){let t={};rt.Get().then(e=>{e&&e.data&&200==e.data.code&&(this.temArr=e.data.data.data,this.temArr.forEach(e=>{t[e.ID]=e}),this.temObj=t)})},queryUserData(){nt.Get().then(t=>{t&&t.data&&200==t.data.code&&(this.userArr=t.data.data.data)})},queryAppData(){ut.Get().then(t=>{t&&t.data&&200==t.data.code&&(this.appArr=t.data.data.data)})},temSelect(t){this.dialogForm.product_id=this.temObj[t].product_id,this.dialogForm.license_type=this.temObj[t].license_type+"",this.dialogForm.date_nums=this.temObj[t].date_nums,this.dialogForm.license_data=this.temObj[t].template_data},getData(){let t={...this.filterParams};t.license_type=t.license_type?Number(t.license_type):"",Qt.Get(t).then(t=>{t&&t.data&&200==t.data.code&&(this.tableData=t.data.data.data,this.count=t.data.data.count)})},getTemplate(){this.dialogVisible=!0,this.addFlag=!0},dialogClose(t){this.dialogForm={ID:null,tempID:"",product_id:"",user_id:"",nums:0,description:"",license_type:"",date_nums:90,license_data:{}},this.addFlag=!0,this.$refs[t].resetFields(),this.dialogVisibleD=!1},editData(t,e){this.addFlag=!1,this.dialogVisible=!0,this.dialogForm={ID:e.ID,product_id:e.product_id,user_id:e.user_id,nums:e.nums,description:e.description,license_type:e.license_type+"",date_nums:e.date_nums,license_data:e.license_data}},deleteData(t,e){this.$confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this._deleteData(e)}).catch(()=>{})},_deleteData(t){let e=[t.ID];ut.Delete(e).then(t=>{t&&t.data&&200===t.data.code&&(this.$message({showClose:!0,message:"删除成功!",type:"success"}),this.dialogVisible=!1,this.getData())})},cancelEdit(t){this.$refs[t].resetFields(),this.dialogVisible=!1},submitEdit(t){let e={product_id:this.dialogForm.product_id,user_id:this.dialogForm.user_id,nums:Number(this.dialogForm.nums),description:this.dialogForm.description,license_type:Number(this.dialogForm.license_type),date_nums:this.dialogForm.date_nums,license_data:this.dialogForm.license_data};this.addFlag?this.$refs[t].validate(t=>{t&&Qt.Post(e).then(t=>{200===t.data.code&&(this.$message({showClose:!0,message:"添加成功!",type:"success"}),this.dialogVisible=!1,this.getData())})}):(this.$refs[t].validate(t=>{t&&Qt.Put(this.dialogForm.ID,e).then(t=>{200===t.data.code&&(this.$message({showClose:!0,message:"编辑成功!",type:"success"}),this.dialogVisible=!1,this.getData())})}),this.dialogVisible=!1)}}},ae=ee,ie=(a("19e5"),Object(n["a"])(ae,Zt,Jt,!1,null,null,null)),se=ie.exports,le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{height:"30px",margin:"20px 0 0 20px"}},[a("el-col",{attrs:{span:10}},[a("span",{staticClass:"title",staticStyle:{"margin-left":"28px"}},[t._v("时间:")]),a("el-date-picker",{staticStyle:{"margin-left":"20px",width:"185px"},attrs:{type:"datetime","picker-options":t.pickerOptionsStart,"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择开始时间"},model:{value:t.filterParams.start_time,callback:function(e){t.$set(t.filterParams,"start_time",e)},expression:"filterParams.start_time"}}),a("span",{staticStyle:{"margin-left":"10px"}},[t._v("-")]),a("el-date-picker",{staticStyle:{"margin-left":"10px",width:"185px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":t.pickerOptionsEnd,placeholder:"选择结束时间"},model:{value:t.filterParams.end_time,callback:function(e){t.$set(t.filterParams,"end_time",e)},expression:"filterParams.end_time"}})],1),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"title",staticStyle:{"margin-left":"5px"}},[t._v("产品名称:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filterParams.product_id,expression:"filterParams.product_id"}],staticClass:"input inputSys inputFilter",domProps:{value:t.filterParams.product_id},on:{input:function(e){e.target.composing||t.$set(t.filterParams,"product_id",e.target.value)}}})])],1),a("div",{staticStyle:{width:"calc(100vw - 170px)",height:"30px",margin:"10px 0 0 20px"}},[a("el-col",{attrs:{span:10}},[a("span",{staticClass:"title"},[t._v("证书类型:")]),a("el-select",{staticClass:"selectFilter",model:{value:t.filterParams.license_type,callback:function(e){t.$set(t.filterParams,"license_type",e)},expression:"filterParams.license_type"}},[a("el-option",{attrs:{value:"0",label:"授权"}}),a("el-option",{attrs:{value:"1",label:"重置密码"}})],1)],1),a("el-col",{attrs:{span:7}},[a("span",{staticClass:"title"},[t._v("设备UUID:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filterParams.uuid,expression:"filterParams.uuid"}],staticClass:"input inputSys inputFilter",domProps:{value:t.filterParams.uuid},on:{input:function(e){e.target.composing||t.$set(t.filterParams,"uuid",e.target.value)}}})]),a("el-col",{attrs:{span:7}},[a("button",{staticClass:"button",on:{click:t.getData}},[t._v("查询")]),a("button",{staticClass:"button",staticStyle:{"margin-left":"20px"},on:{click:t.getTemplate}},[t._v("签发")])])],1),a("common-table",{staticStyle:{height:"calc(100vh - 220px)","overflow-y":"auto","margin-top":"20px"},attrs:{data:t.tableData,tableParams:t.json.tableParams},scopedSlots:t._u([{key:"last",fn:function(){return[a("el-table-column",{attrs:{label:"证书类型",prop:"license_type",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.license_type?a("div",[t._v("授权")]):a("div",[t._v("重置密码")])]}}])}),a("el-table-column",{attrs:{label:"产品名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.good.description))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){return a.preventDefault(),t.download(e.$index,e.row)}}},[t._v("下载")]),a("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){return a.preventDefault(),t.editData(e.$index,e.row)}}},[t._v("详情")])]}}])})]},proxy:!0}])}),a("pagination",{attrs:{count:t.count,filterParams:t.filterParams},on:{getPageNum:t.getData}}),a("el-dialog",{attrs:{title:t.addFlag?"签发证书":"证书详情",width:"520px",visible:t.dialogVisible},on:{close:function(e){return t.dialogClose("ruleForm")},"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticStyle:{padding:"30px 30px 30px 0"}},[a("el-form",{ref:"ruleForm",staticStyle:{"padding-top":"0px"},attrs:{model:t.dialogForm,"label-width":"120px","label-position":"right",rules:t.rules}},[a("el-form-item",{staticClass:"inputLab",attrs:{label:"选择批量证书",prop:"good_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:!t.addFlag},on:{change:t.goodSelect},model:{value:t.dialogForm.good_id,callback:function(e){t.$set(t.dialogForm,"good_id",e)},expression:"dialogForm.good_id"}},t._l(t.cerArr,(function(t){return a("el-option",{key:t.ID,attrs:{label:t.description,value:t.ID}})})),1)],1),a("el-form-item",{staticClass:"inputLab",attrs:{label:"设备UUID",prop:"uuid"}},[a("el-input",{attrs:{disabled:!t.addFlag},model:{value:t.dialogForm.uuid,callback:function(e){t.$set(t.dialogForm,"uuid",e)},expression:"dialogForm.uuid"}})],1),a("el-form-item",{staticClass:"inputLab",attrs:{label:"产品名称"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:""},model:{value:t.dialogForm.product_id,callback:function(e){t.$set(t.dialogForm,"product_id",e)},expression:"dialogForm.product_id"}},t._l(t.appArr,(function(t){return a("el-option",{key:t.ID,attrs:{label:t.name,value:t.ID}})})),1)],1),a("el-form-item",{staticClass:"inputLab",attrs:{label:"证书种类",prop:"license_type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:""},model:{value:t.dialogForm.license_type,callback:function(e){t.$set(t.dialogForm,"license_type",e)},expression:"dialogForm.license_type"}},[a("el-option",{attrs:{value:"0",label:"授权"}}),a("el-option",{attrs:{value:"1",label:"重置密码"}})],1)],1),a("el-form-item",{staticClass:"inputLab",attrs:{label:"授权天数",prop:"date_nums"}},[a("el-input",{attrs:{disabled:""},model:{value:t.dialogForm.date_nums,callback:function(e){t.$set(t.dialogForm,"date_nums",e)},expression:"dialogForm.date_nums"}})],1),t._l(t.dialogForm.license_data,(function(e,i,s){return a("div",{key:s,staticStyle:{"margin-top":"8px"}},[a("el-form-item",{staticClass:"inputLab",attrs:{label:e.description?e.description:i,prop:i}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],staticClass:"input inputSys inputFilter",class:{inputDisabled:e.fixed},staticStyle:{width:"calc(100% - 20px)","margin-left":"0"},attrs:{disabled:""},domProps:{value:e.value},on:{input:function(a){a.target.composing||t.$set(e,"value",a.target.value)}}})]),e.tooltip?a("el-tooltip",{staticClass:"ml10",attrs:{content:e.tooltip,placement:"right"}},[a("i",{staticClass:"iconfont"},[t._v("")])]):t._e()],1)})),a("el-form-item",{staticClass:"inputLab",attrs:{label:"证书描述"}},[a("el-input",{attrs:{type:"textarea",disabled:""},model:{value:t.dialogForm.description,callback:function(e){t.$set(t.dialogForm,"description",e)},expression:"dialogForm.description"}})],1),a("div",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"delButton",attrs:{type:"button"},on:{click:function(e){return t.cancelEdit("ruleForm")}}},[t._v("取消")]),t.addFlag?a("button",{staticClass:"button",staticStyle:{"margin-left":"60px"},attrs:{type:"button"},on:{click:function(e){return t.submitEdit("ruleForm")}}},[t._v("提交")]):t._e()])],2)],1)])],1)},re=[];let oe=a("fe81").json;var ne={components:{CommonTable:bt,Pagination:At},data(){return{json:oe,cerArr:[],cerObj:{},appArr:[],tableData:[],count:0,filterParams:{pageSize:12,pageNum:1,license_type:"",uuid:"",product_id:"",start_time:"",end_time:""},pickerOptionsStart:{disabledDate:t=>{if(this.filterParams.start_time)return t.getTime()>new Date(this.filterParams.end_time).getTime()}},pickerOptionsEnd:{disabledDate:t=>{if(this.filterParams.end_time)return t.getTime()<new Date(this.filterParams.start_time).getTime()}},dialogVisible:!1,dialogVisibleD:!1,addFlag:!0,dialogForm:{good_id:"",product_id:"",uuid:"",description:"",license_type:"",date_nums:90,license_data:{}},rules:{good_id:[{required:!0,message:"*批量签发不能为空！",trigger:"click"}],uuid:[{required:!0,message:"*uuid不能为空！",trigger:"blur"}],product_id:[{required:!1,message:"*产品不能为空",trigger:"click"}]},detailForm:{}}},created(){this.queryCertiData(),this.queryAppData(),this.getData()},methods:{queryCertiData(){let t={};Qt.Get().then(e=>{e&&e.data&&200==e.data.code&&(this.cerArr=e.data.data.data,this.cerArr.forEach(e=>{t[e.ID]=e}),this.cerObj=t)})},queryAppData(){ut.Get().then(t=>{t&&t.data&&200==t.data.code&&(this.appArr=t.data.data.data)})},goodSelect(t){this.dialogForm.good_id=this.cerObj[t].ID,this.dialogForm.product_id=this.cerObj[t].product_id,this.dialogForm.license_type=this.cerObj[t].license_type+"",this.dialogForm.date_nums=this.cerObj[t].date_nums,this.dialogForm.license_data=this.cerObj[t].good_data},getData(){let t={...this.filterParams};t.license_type=t.license_type?Number(t.license_type):"",st.Get(t).then(t=>{t&&t.data&&200==t.data.code&&(this.tableData=t.data.data.data,this.count=t.data.data.count)})},getTemplate(){this.dialogVisible=!0,this.addFlag=!0},download(t,e){const a=sessionStorage.getItem("token"),i=document.createElement("a");i.setAttribute("href",`/api/license/${e.ID}/download?Authorization=${a}`),i.click()},handleDialogClose(){this.dialogVisibleD=!1},dialogClose(t){this.dialogForm={good_id:"",product_id:"",uuid:"",description:"",license_type:"",date_nums:90,license_data:{}},this.$refs[t].resetFields(),this.dialogVisibleD=!1},editData(t,e){this.addFlag=!1,this.dialogVisible=!0,this.dialogForm={good_id:e.good_id,product_id:e.product_id,uuid:e.uuid,description:e.description,license_type:e.license_type+"",date_nums:e.date_nums,license_data:e.license_data}},cancelEdit(t){this.$refs[t].resetFields(),this.dialogVisible=!1},submitEdit(t){if(this.addFlag){let e={good_id:this.dialogForm.good_id,uuid:this.dialogForm.uuid};this.$refs[t].validate(t=>{t&&st.PostG(e).then(t=>{200===t.data.code&&(this.$message({showClose:!0,message:"添加成功!",type:"success"}),this.dialogVisible=!1,this.getData())})})}else this.dialogVisible=!1}}},de=ne,ce=(a("3fe9"),Object(n["a"])(de,le,re,!1,null,null,null)),ue=ce.exports,pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"total"},[a("span",{staticStyle:{"margin-right":"20px"}},[t._v("产品: "+t._s(t.tableData.length))]),a("span",[t._v("客户: "+t._s(t.userNum))])]),a("div",[t._l(t.tableData,(function(e){return[a("el-card",{key:e.id,staticClass:"box-card"},[a("div",[t._v(" "+t._s(e.name)+" ")]),a("div",[t._v(" 模板: "+t._s(e.template_num)+" | 证书: "+t._s(e.license_num)+" ")])])]}))],2)])},me=[],ge={data(){return{tableData:[],userNum:0}},mounted(){this.queryData()},methods:{queryData(){ut.Get_INFO().then(t=>{t&&t.data&&200==t.data.code&&(this.tableData=t.data.data)}),nt.Get().then(t=>{t&&t.data&&200==t.data.code&&(this.userNum=t.data.data.data.length)})}}},fe=ge,he=(a("6afa"),Object(n["a"])(fe,pe,me,!1,null,"7f75be2c",null)),be=he.exports,_e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"myMessage"},[a("div",{staticClass:"tabsDiv"},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"站内消息",name:"first"}},[t._v("没有未读消息")]),a("el-tab-pane",{attrs:{label:"平台公告",name:"second"}},[t._v("没有未读消息")])],1)],1),a("div",{staticClass:"tabsDiv"},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"优惠信息",name:"first"}},[t._v("没有未读消息")])],1)],1)])},ve=[],ye={components:{},data(){return{activeName:"second"}},created(){},methods:{handleClick(t,e){console.log(t,e)}}},Fe=ye,xe=(a("a7c4"),Object(n["a"])(Fe,_e,ve,!1,null,null,null)),Ae=xe.exports,ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{height:"30px",margin:"20px 0 0 20px"}},[a("el-col",{attrs:{span:8}},[a("span",{staticClass:"title",staticStyle:{"margin-left":"5px"}},[t._v("客户名称:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.real_name,expression:"searchForm.real_name"}],staticClass:"input inputSys inputFilter",domProps:{value:t.searchForm.real_name},on:{input:function(e){e.target.composing||t.$set(t.searchForm,"real_name",e.target.value)}}})]),a("el-col",{attrs:{span:7}},[a("button",{staticClass:"button",on:{click:t.queryData}},[t._v("查询")]),a("button",{staticClass:"button",staticStyle:{"margin-left":"20px"},on:{click:t.addData}},[t._v("新增")])])],1),a("common-table",{staticStyle:{height:"calc(100vh - 220px)","overflow-y":"auto","margin-top":"20px"},attrs:{data:t.tableData,tableParams:t.json.tableParams},scopedSlots:t._u([{key:"last",fn:function(){return[a("el-table-column",{attrs:{label:"操作",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){return a.preventDefault(),t.editData(e.$index,e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){return a.preventDefault(),t.deleteData(e.$index,e.row)}}},[t._v("删除")])]}}])})]},proxy:!0}])}),a("pagination",{attrs:{count:t.count,filterParams:t.searchForm},on:{getPageNum:t.queryData}}),a("el-dialog",{attrs:{title:t.addFlag?"新增产品":"修改产品",width:"580px",visible:t.dialogVisible},on:{close:t.dialogClose,"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticStyle:{padding:"30px 30px 30px 0"}},[a("el-form",{ref:"ruleForm",staticStyle:{"padding-top":"0px"},attrs:{model:t.dialogForm,"label-width":"100px","label-position":"right",rules:t.rules}},[a("el-form-item",{staticClass:"inputLab",attrs:{label:"客户名称",prop:"real_name"}},[a("el-input",{model:{value:t.dialogForm.real_name,callback:function(e){t.$set(t.dialogForm,"real_name",e)},expression:"dialogForm.real_name"}})],1),a("el-form-item",{staticClass:"inputLab",attrs:{label:"登陆账号",prop:"user_name"}},[a("el-input",{model:{value:t.dialogForm.user_name,callback:function(e){t.$set(t.dialogForm,"user_name",e)},expression:"dialogForm.user_name"}})],1),a("el-form-item",{staticClass:"inputLab",attrs:{label:"邮箱"}},[a("el-input",{model:{value:t.dialogForm.email,callback:function(e){t.$set(t.dialogForm,"email",e)},expression:"dialogForm.email"}})],1),a("el-form-item",{staticClass:"inputLab",attrs:{label:"电话"}},[a("el-input",{model:{value:t.dialogForm.phone,callback:function(e){t.$set(t.dialogForm,"phone",e)},expression:"dialogForm.phone"}})],1),a("el-form-item",{staticClass:"inputLab",attrs:{label:"账号状态"}},[a("el-switch",{model:{value:t.dialogForm.in_use,callback:function(e){t.$set(t.dialogForm,"in_use",e)},expression:"dialogForm.in_use"}})],1),a("el-form-item",{staticClass:"inputLab",attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.dialogForm.description,callback:function(e){t.$set(t.dialogForm,"description",e)},expression:"dialogForm.description"}})],1),a("div",{staticStyle:{"text-align":"center"}},[a("button",{staticClass:"delButton",staticStyle:{"margin-right":"60px"},attrs:{type:"button"},on:{click:function(e){return t.cancelEdit("ruleForm")}}},[t._v("取消")]),a("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){return t.submitEdit("ruleForm")}}},[t._v("提交")])])],1)],1)])],1)},Ce=[];let De=a("10b4").json;var we={components:{CommonTable:bt,Pagination:At},data(){return{json:De,tableData:[],count:0,searchForm:{pageSize:12,pageNum:1,real_name:""},dialogVisible:!1,addFlag:!0,dialogForm:{ID:null,real_name:"",user_name:"",in_use:!0,phone:"",description:"",email:""},rules:{real_name:[{required:!0,message:"客户名称不能为空！",trigger:"blur"}],user_name:[{required:!0,message:"登陆账号不能为空！",trigger:"blur"}]}}},created(){this.queryData()},methods:{queryData(){let t=this.searchForm;nt.Get(t).then(t=>{t&&t.data&&200==t.data.code&&(this.tableData=t.data.data.data,this.count=t.data.data.count)})},addData(){this.addFlag=!0,this.dialogVisible=!0},editData(t,e){this.addFlag=!1,this.dialogVisible=!0,this.dialogForm={ID:e.ID,real_name:e.real_name,user_name:e.user_name,description:e.description,in_use:1==e.in_use,phone:e.phone,remark:e.remark,email:e.email}},deleteData(t,e){this.$confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this._deleteData(e)}).catch(()=>{})},_deleteData(t){let e=[t.ID];nt.Delete(e).then(t=>{t&&t.data&&200===t.data.code&&(this.$message({showClose:!0,message:"删除成功!",type:"success"}),this.dialogVisible=!1,this.queryData())})},cancelEdit(t){this.$refs[t].resetFields(),this.dialogVisible=!1},submitEdit(t){let e={real_name:this.dialogForm.real_name,user_name:this.dialogForm.user_name,in_use:this.dialogForm.in_use?1:0,phone:this.dialogForm.phone,description:this.dialogForm.description,email:this.dialogForm.email};this.addFlag?this.$refs[t].validate(t=>{t&&nt.Post(e).then(t=>{t&&t.data&&200===t.data.code&&(this.$message({showClose:!0,message:"添加成功!",type:"success"}),this.dialogVisible=!1,this.queryData())})}):this.$refs[t].validate(t=>{let a={ID:this.dialogForm.ID,...e};t&&nt.Put(a).then(t=>{t&&t.data&&200===t.data.code&&(this.$message({showClose:!0,message:"修改成功!",type:"success"}),this.dialogVisible=!1,this.queryData())})})},dialogClose(){this.addFlag=!1,this.dialogForm={ID:null,real_name:"",user_name:"",in_use:!0,description:"",phone:"",remark:"",email:""}}}},je=we,Se=(a("ae8d"),Object(n["a"])(je,ke,Ce,!1,null,null,null)),Pe=Se.exports;i["default"].use(u["a"]);let $e=1==sessionStorage.getItem("roleID"),Ie=[];Ie=$e?[{path:"certificate",name:"certificate",component:jt},{path:"template",name:"template",component:Bt},{path:"application",name:"application",component:Lt},{path:"certificateM",name:"certificateM",component:se},{path:"homePage",name:"homePage",component:be},{path:"user",name:"user",component:Pe}]:[{path:"authorization",name:"authorization",component:Yt},{path:"certificateClient",name:"certificateClient",component:ue},{path:"myMessage",name:"myMessage",component:Ae}];const Ee=[{path:"*",component:B},{path:"/",component:c,redirect:"/login",children:[{path:"login",name:"login",component:S},{path:"home",name:"home",component:J,redirect:"/home/certificate",children:[...Ie]}]}],Oe=new u["a"]({mode:"hash",routes:Ee});var Be=Oe,Ve=(a("be35"),a("5143"),a("0fae"),a("a925")),Ne=a("098e"),qe=a.n(Ne),Te=a("18b9"),Ue=a.n(Te);class Ge{setCookie(t,e,a){const i=new Date;i.setTime(i.getTime()+864e5*a),window.document.cookie="userName="+t+";path=/;expires="+i.toGMTString(),window.document.cookie="userPwd="+e+";path=/;expires="+i.toGMTString()}getCookie(){const t={};if(document.cookie.length>0){for(var e=document.cookie.split("; "),a=0;a<e.length;a++){var i=e[a].split("=");"userName"==i[0]?t.user_name=i[1]:"userPwd"==i[0]&&(t.pwd=i[1])}return t}}}const Le=new Ge;var Me={_rememberCookie:Le};i["default"].use(b.a),i["default"].prototype.DG_Fun=Me;const ze=u["a"].prototype.push;u["a"].prototype.push=function(t){return ze.call(this,t).catch(t=>t)},i["default"].use(Ve["a"]);const Re=new Ve["a"]({locale:"zh-CN",messages:{"zh-CN":qe.a,"en-US":Ue.a},silentTranslationWarn:!0});i["default"].config.productionTip=!1,new i["default"]({router:Be,i18n:Re,render:t=>t(c)}).$mount("#app")},"590e":function(t,e,a){"use strict";a.r(e),a.d(e,"json",(function(){return i}));const i={tableParams:{description:{label:"模板描述",type:"input"},date_nums:{label:"有效期",type:"input"},CreatedAt:{label:"创建时间",type:"input"}}}},"5c0b":function(t,e,a){"use strict";var i=a("9c0c"),s=a.n(i);s.a},6295:function(t,e,a){"use strict";var i=a("c458"),s=a.n(i);s.a},"63c4":function(t,e,a){},"693e":function(t,e,a){"use strict";var i=a("451a"),s=a.n(i);s.a},"6afa":function(t,e,a){"use strict";var i=a("30b8"),s=a.n(i);s.a},7424:function(t,e,a){},9881:function(t,e,a){"use strict";a.r(e),a.d(e,"json",(function(){return i}));const i={tableParams:{description:{label:"证书描述",type:"input"},uuid:{label:"设备UUID",type:"input",width:"300"},CreatedAt:{label:"创建时间",type:"input"}}}},"9c0c":function(t,e,a){},"9f84":function(t,e,a){"use strict";var i=a("d0bf"),s=a.n(i);s.a},a171:function(t,e){t.exports="data:image/png;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAQAQAABMLAAATCwAAAAAAAAAAAAD//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////x8ZwP8fGcD/HxnA/x8ZwP8fGcD/HxnA/x8ZwP8fGcD/HxnA/x8ZwP8fGcD/Y1/U//////////////////////9pZdX/aGTV/2hk1f9oZNX/aGTV/2hk1f9oZNX/aGTV/2hk1f9oY9X/JyLD/x8ZwP///////////////////////////////////////////////////////////////////////////1dS0P8fGcD///////////////////////////////////////////////////////////////////////////9YU9D/HxnA//////////////////////8sJsT/Yl7T////////////////////////////////////////////WFPQ/x8ZwP//////////////////////HxnA/1lU0f///////////////////////////////////////////1hT0P8fGcD//////////////////////x8ZwP9ZVNH///////////////////////////////////////////9YU9D/HxnA//////////////////////8gGsH/WVTR////////////////////////////////////////////V1LQ/x8ZwP//////////////////////IBrB/zIsxv9pZdX/aWXV/2ll1f9pZdX/aWXV/2pm1f9qZtX/aGTV/ygjw/8fGcD//////////////////////yQewv8gGsH/IBrB/yAawf8gGsH/IBrB/x8ZwP8fGcD/HxnA/x8ZwP8fGcD/Y1/U////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAAAAAAAAAAAAA/zAAAAAAAACfMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=="},a7c4:function(t,e,a){"use strict";var i=a("63c4"),s=a.n(i);s.a},abc4:function(t,e,a){},ae8d:function(t,e,a){"use strict";var i=a("f6be"),s=a.n(i);s.a},b9fd:function(t,e,a){t.exports=a.p+"static/img/loginBgr.53403387.png"},bc24:function(t,e,a){"use strict";var i=a("538e"),s=a.n(i);s.a},be35:function(t,e,a){},c458:function(t,e,a){},cd76:function(t,e,a){},d0bf:function(t,e,a){},e0ec:function(t,e,a){},f6be:function(t,e,a){},fe81:function(t,e,a){"use strict";a.r(e),a.d(e,"json",(function(){return i}));const i={tableParams:{description:{label:"证书描述",type:"input"},uuid:{label:"设备UUID",type:"input",width:"300"},CreatedAt:{label:"创建时间",type:"input"}}}},ff7d:function(t,e,a){"use strict";var i=a("e0ec"),s=a.n(i);s.a}});